# Epic B: 最小可用界面

## Epic信息
- **Epic ID**: EPIC-002
- **优先级**: P0 (最高)
- **预计时长**: 第3周
- **依赖**: Epic A (核心逻辑引擎)
- **状态**: 待开始

## Epic目标
为AI引擎穿上一件简洁、高效、实用的"外衣"，让用户能完成从上传、分析到交互的完整闭环。重点是功能性而非美观，追求极简但完整的用户体验。

## 业务价值
- **用户价值**: 提供直观、流畅的用户界面，降低使用门槛
- **产品价值**: 完成MVP的用户可见部分，使产品可演示、可测试
- **市场价值**: 创建可用于用户反馈和市场验证的界面

## 技术范围
### 包含内容
- 剧本上传界面（支持粘贴和文件上传）
- 分析结果展示页面
- 错误高亮和上下文显示
- 交互式修改建议（接受/拒绝）
- 剧本导出功能
- 基础响应式布局

### 不包含内容
- 复杂动画和过渡效果
- 高级编辑功能
- 实时协作功能
- 用户个性化设置

## Stories列表

### Story B.1: 实现剧本上传与分析结果展示的基础界面
**描述**: 创建核心页面结构和基础组件
**验收标准**:
- [ ] 实现上传页面（支持拖拽、粘贴、文件选择）
- [ ] 创建分析中的加载状态界面
- [ ] 实现分析结果的基础展示布局
- [ ] 使用shadcn/ui组件库
- [ ] 支持.txt和.docx文件上传
**技术细节**:
- Next.js App Router架构
- 使用shadcn/ui的Card、Button、Input组件
- Tailwind CSS响应式设计
**估时**: 2天

### Story B.2: 实现分析结果的可视化与上下文关联
**描述**: 增强结果展示，提供清晰的错误定位和上下文
**验收标准**:
- [ ] 实现分屏视图（原文|错误列表）
- [ ] 错误位置高亮显示
- [ ] 点击错误跳转到对应位置
- [ ] 显示错误严重程度（颜色编码）
- [ ] 展示错误的上下文信息
**技术细节**:
- 使用React Context管理选中状态
- 实现平滑滚动和定位
- 使用Zustand进行状态管理
**估时**: 2天

### Story B.3: 实现核心交互功能并导出结果
**描述**: 完成用户交互流程，实现修改建议的接受/拒绝和导出
**验收标准**:
- [ ] 每个建议显示"接受"/"拒绝"按钮
- [ ] 实时预览接受修改后的效果
- [ ] 批量接受/拒绝功能
- [ ] 导出修改后的剧本（.txt/.docx格式）
- [ ] 导出包含修改历史的报告
**技术细节**:
- 使用状态管理追踪修改决策
- 集成文件生成库（如docx）
- 实现前端文件下载
**估时**: 3天

## UI/UX设计规范
### 设计原则
- **极简主义**: 减少视觉噪音，专注核心功能
- **清晰层级**: 信息架构清晰，主次分明
- **即时反馈**: 所有操作提供即时视觉反馈
- **无障碍**: 符合WCAG AA标准

### 核心交互模式
- **拖拽上传**: 大面积拖拽区域
- **分屏对比**: 原文和建议并排显示
- **上下文高亮**: 错误位置醒目标记
- **一键操作**: 主要操作单击完成

### 颜色方案
- 错误严重度: 🔴 严重 / 🟡 警告 / 🔵 建议
- 状态颜色: ✅ 已接受 / ❌ 已拒绝 / ⏸ 待处理

## 依赖关系
### 技术依赖
- Epic A完成的AI引擎API
- Next.js 14.x环境配置
- shadcn/ui组件库安装
- Tailwind CSS配置

### 接口依赖
需要Epic A提供的接口:
```typescript
interface AnalysisAPI {
  analyzeScript(script: string): Promise<AnalysisResult>
  getSuggestions(errorId: string): Promise<Suggestion[]>
  applyChange(changeId: string): Promise<UpdatedAnalysis>
}
```

## 风险与缓解
| 风险 | 影响 | 概率 | 缓解措施 |
|-----|------|------|----------|
| AI响应时间过长影响体验 | 高 | 中 | 实现流式响应和进度提示 |
| 大文件上传处理 | 中 | 中 | 设置文件大小限制，分块处理 |
| 浏览器兼容性 | 低 | 低 | 目标现代浏览器，提供降级方案 |

## 验收标准
### Epic级验收标准
- [ ] 完整的上传->分析->修改->导出流程可用
- [ ] 界面在桌面和平板设备上正常显示
- [ ] 所有核心交互响应时间<300ms
- [ ] 无明显的UI错误或布局问题
- [ ] 通过基础的可用性测试

### 质量标准
- Lighthouse性能评分>85
- 无TypeScript类型错误
- 组件有合理的错误边界
- 关键操作有加载和错误状态

## 完成定义 (DoD)
- [ ] 所有Story完成并集成
- [ ] UI组件单元测试编写
- [ ] E2E测试覆盖核心流程
- [ ] 响应式设计验证通过
- [ ] 代码通过lint检查
- [ ] UI文档和组件说明完成

## 备注
- 优先保证功能完整性，而非视觉完美
- 可以使用shadcn/ui的默认样式，减少定制
- 重点测试文件上传和导出功能的兼容性
- 预留扩展接口，方便后续功能增强